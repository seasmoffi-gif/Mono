<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeTo: territory</title>
<script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=6793b1f89b23f50012715959&product=inline-share-buttons&source=platform" async="async"></script>
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #c94b63;
            --dark: #141414;
            --light: #fff;
            --gray: #808080;
        }

        body {
            background: var(--dark);
            color: var(--light);
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        .swiper {
            width: 100%;
            height: 70vh;
            padding: 30px 0;
        }

        .swiper-slide {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s;
            width: 85%;
        }

        .anime-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        .content-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0,0,0,0.9));
            color: white;
        }

        .anime-title {
            font-size: 1.5rem;
            margin: 0 0 10px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .anime-description {
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .anime-meta {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
        }

        .meta-item i {
            color: var(--primary);
        }

        .swiper-pagination-bullet {
            background: var(--light);
            opacity: 0.5;
            width: 10px;
            height: 10px;
        }

        .swiper-pagination-bullet-active {
            background: var(--primary) !important;
            opacity: 1;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
        }

        .error {
            color: var(--primary);
            text-align: center;
            padding: 50px;
        }

        @media (max-width: 768px) {
            .swiper {
                height: 60vh;
                padding: 20px 0;
            }
            
            .swiper-slide {
                width: 95%;
            }

            .anime-title {
                font-size: 1.2rem;
            }

            .anime-description {
                font-size: 0.8rem;
                -webkit-line-clamp: 2;
            }
        }
        .watch-now-button {
            background-color: var(--primary);
            color: var(--light);
            padding: 10px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            transition: transform 0.2s, background-color 0.2s;
            margin-bottom: 15px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .watch-now-button:hover {
            background-color: #b2070f;
            transform: scale(1.05);
        }

        .watch-now-button i {
            margin-right: 8px;
        }

        /* Adjust content overlay padding */
        .content-overlay {
            padding: 30px 20px 20px;
        }
      
       <!-- Update the popular section styles -->
<style>
    .popular-section {
        padding: 40px 20px;
        margin-top: 50px;
    }

    .popular-title {
        font-size: 1.8rem;
        margin-bottom: 25px;
        padding-left: 10px;
        text-decoration: none !important;
    }

    .popular-container {
        display: flex;
        overflow-x: auto;
        gap: 20px;
        padding-bottom: 20px;
      
    }

    .popular-item {
        flex: 0 0 200px;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        transition: transform 0.2s;
        text-decoration: none !important;
    }

    .popular-image {
        width: 100%;
        height: 280px;
        object-fit: cover;
        border-radius: 10px;
    }

    .popular-anime-title {
        font-size: 1rem;
        margin: 10px 0 0;
        padding: 0 10px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        color: var(--light);
        text-decoration: none !important;
    }

    @media (max-width: 768px) {
        .popular-item {
            flex: 0 0 150px;
        }
        
        .popular-image {
            height: 200px;
        }
        
        .popular-title {
            font-size: 1.4rem;
        }
          .mascot-image {
      width: 45px;
      height: 45px;
      margin-right: -10px;
    }

    }
      .popular-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
    padding: 0 10px;
    color: #c94b63;
  }

  .mascot-image {
    width: 60px;
    height: 60px;
    margin-right: 5px;
    border-radius: 50%;
    object-fit: cover;
  }
   .subtle-text {
   text-align: center;
   margin-top: 15px;
   opacity: 0.7;
 }

 .subtle-text p {
   color: var(--primary);
   font-size: 0.9rem;
   font-style: bold;
   margin: 0;
   text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
 }
    .scroll-controls {
    position: relative;
  }

  .arrow-container {
    display: none;
    flex-direction: column;
    gap: 10px;
    position: absolute;
    right: -50px;
    top: 50%;
    transform: translateY(-50%);
  }

  .scroll-arrow {
    background: var(--primary);
    color: var(--light);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .scroll-arrow:hover {
    opacity: 1;
  }

  @media (min-width: 769px) {
    .arrow-container {
      display: flex;
    }

    .popular-container {
      padding-right: 60px;
    }
  }

  @media (max-width: 768px) {
    .arrow-container {
      display: none !important;
    }
  }
   .skeleton-popular {
        flex: 0 0 200px;
        border-radius: 10px;
        background: #2a2a2a;
        position: relative;
        overflow: hidden;
    }

    .skeleton-popular::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, #2a2a2a 25%, #333 50%, #2a2a2a 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
        from { background-position: 200% 0; }
        to { background-position: -200% 0; }
    }

    @media (max-width: 768px) {
        .skeleton-popular {
            flex: 0 0 150px;
        }
         

    }
  .recent-section {
    padding: 55px 0px;
    
    margin-top: 5px;
  }

  .recent-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding: 20 90px;
  }

  .recent-title {
    font-size: 1.4rem;
    color: var(--primary);
    margin: 0;
    text-decoration: none !important;
  }

  .recent-grid {
    display: grid;
grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
gap: 20px;
margin-bottom: 40px;
}

  .recent-item {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.2s;
    text-decoration: none;
    border-color: var(--dark);
  }

  .recent-item:hover {
    transform: translateY(-5px);
  }

  .recent-image {
    width: 100%;
    height: 300px;
    object-fit: cover;
  }
.cc  {
  
  
  color: var(--gray);
  
}
.cc i {
  color: var(--primary);
}
  .recent-info {
    padding: 12px;
  }

.recent-anime-title {
    font-size: 0.9rem;
    color: var(--primary);
    text-align: center; 
    display: -webkit-box;
    -webkit-line-clamp: 2; 
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
    width: 90%;
    margin: 0 auto;
    white-space: normal;
}


  .recent-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--gray);
   padding-top: 10px;
  }
.recent-meta-overlay {
  position: absolute;
  bottom: 73px;
  left: 4px;
  background: var(--primary);
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--dark);
}

.recent-meta-overlay i {
color: var(--dark);
}


.pagination {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 30px;
  align-items: center;
  position: relative;
}

.page-button {
  background: linear-gradient(145deg, #c94b63, #b2070f);
  color: var(--light);
  border: none;
  width: 45px;
  height: 45px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
  position: relative;
  overflow: hidden;
}

.page-button:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(201, 75, 99, 0.3);
  background: linear-gradient(145deg, #b2070f, #c94b63);
}

.page-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: #2a2a2a;
}

.page-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.2),
    transparent
  );
  transition: 0.5s;
}

.page-button:hover:not(:disabled)::before {
  left: 100%;
}

.current-page {
  color: var(--light);
  font-weight: bold;
  min-width: 40px;
  text-align: center;
  background: rgba(201, 75, 99, 0.2);
  padding: 8px 15px;
  border-radius: 8px;
  font-size: 1.1rem;
  position: relative;
}

.current-page::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 2px;
  background: var(--primary);
}

@media (max-width: 768px) {
  .page-button {
    width: 40px;
    height: 40px;
    font-size: 1rem;
    border-radius: 10px;
  }
  
  .current-page {
    font-size: 1rem;
    padding: 6px 12px;
  }
}

  @media (max-width: 768px) {
    .recent-grid {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }

    .recent-image {
      height: 200px;
    }
  }
  .popular-title i,
.recent-title i {
color: var(--primary);
margin-right: 12px;
font-size: 1.2em;
vertical-align: middle;
text-shadow: 0 2px 4px rgba(201, 75, 99, 0.3);
}

@media (max-width: 768px) {
.popular-title i,
.recent-title i {
font-size: 1.5rem;
margin-right: 8px;
}
}
  .navbar {
    background-color: var(--dark);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo-te { color: var(--light); }
        .logo-to { color: var(--primary); }

        .search-container {
    display: flex;
    align-items: center;
    flex-grow: 1;
    max-width: 500px;
    margin: 0 20px;
  }

  .search-input {
    width: 100%;
    padding: 10px 15px;
    border-radius: 25px 0 0 25px;
    border: none;
    background-color: #222;
    color: var(--light);
  }

  .search-button {
    background-color: var(--primary);
    color: var(--light);
    border: none;
    padding: 10px 15px;
    border-radius: 0 25px 25px 0;
    cursor: pointer;
  }


        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border-radius: 0 0 10px 10px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .search-result-item {
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: background 0.2s;
            text-decoration: none;
        }

        .search-result-item:hover { background: rgba(255,255,255,0.05); }

        .search-result-image {
            width: 50px;
            height: 70px;
            object-fit: cover;
            border-radius: 4px;
        }

        .search-result-title {
            color: var(--light);
            font-size: 0.95rem;
            margin: 0;
        }

        .search-result-info {
            color: var(--gray);
            font-size: 0.8rem;
            margin-top: 4px;
        }

        .no-results {
            padding: 15px;
            color: var(--gray);
            text-align: center;
        }
          .favorites-link {
    color: var(--light);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    border-radius: 25px;
    transition: all 0.3s ease;
  }

  .favorites-link:hover {
    background: rgba(201, 75, 99, 0.1);
  }

  .favorites-link i {
    color: var(--primary);
    font-size: 1.2rem;
  }

  .favorites-text {
    font-size: 1rem;
  }

 @media (max-width: 768px) {
  .navbar {
   justify-content: space-between;
   padding: 15px;
 }

 .favorites-text {
   display: none;
 }

 .favorites-link {
   padding: 8px;
 }

 .search-container {
   margin: 0 10px;
   flex-grow: 1;
 }

 .logo {
   font-size: 1.5rem;
 }
 }


 .mobile-menu-toggle,
 .navbar-menu {
   display: none !important;
 }
 }
 .popular-item, .recent-item {
  transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1), 
              box-shadow 0.3s;
  transform-origin: center bottom;
  perspective: 1000px;
}

.popular-item:hover, .recent-item:hover {
  transform: perspective(1000px) rotateX(5deg) rotateY(5deg) scale(1.05);
  box-shadow: 0 15px 30px rgba(0,0,0,0.5);
}

.popular-image, .recent-image {
  transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
}

.popular-item:hover .popular-image,
.recent-item:hover .recent-image {
  transform: scale(1.05);
}

/* Shine effect from info page */
.popular-item::after, .recent-item::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.2),
    transparent
  );
  transition: left 0.6s;
}

.popular-item:hover::after,
.recent-item:hover::after {
  left: 100%;
}

/* Matching scale animation */
@keyframes scaleUp {
  to { transform: scale(1); }
}

.popular-item, .recent-item {
  animation: scaleUp 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
}


.popular-item, .recent-item {
  transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
  overflow: hidden;
  position: relative;
}
  
/* Konami code effect */
.konami-activated {
    animation: disco 0.1s 10;
}

@keyframes disco {
    0% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(180deg); }
    100% { filter: hue-rotate(360deg); }
}

@keyframes dance {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* Secret cursor on logo hover */
.logo:hover {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23c94b63' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") 12 12, auto;
}
/* Add near existing cursor styles */
.popular-item:hover, .recent-item:hover {
    cursor: url('images/cursor.png'), auto;
}

.popular-item:hover .popular-image,
.recent-item:hover .recent-image {
    cursor: url('images/cursor.png'), auto;
}
.skeleton-recent {
  background: #2a2a2a;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  min-height: 300px;
}

.skeleton-recent::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, #2a2a2a 25%, #333 50%, #2a2a2a 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.load-more-container {
  text-align: center;
  margin: 30px 0;
}
.recent-meta .ep-count {
  margin: 0 auto;
  text-align: center;
}
.more-button {
  background-color: #222;
color: var(--light);
padding: 10px 25px;
border-radius: 25px;
text-decoration: none;
font-weight: bold;
display: inline-block;
transition: transform 0.2s,
background-color 0.2s;
margin-bottom: 15px;
border: none;
cursor: pointer;
font-size: 0.9rem;
box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
border: 2px solid var(--primary);
}
.more-button i {
  color: var(--primary);
}
.footer {
    background: linear-gradient(180deg, var(--secondary), var(--dark));
    color: var(--light);
    padding: 40px 20px;
    text-align: center;
    margin-top: 60px;
    border-top: 2px solid var(--primary);
    box-shadow: 0 -5px 20px rgba(201, 75, 99, 0.2);
}

.footer-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.footer-logo {
    display: flex;
    align-items: center;
    gap: 10px;
}

.footer-logo img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary);
    transition: transform 0.3s;
}

.footer-logo img:hover {
    transform: rotate(360deg);
}

.footer-brand {
    font-size: 1.8rem;
    font-weight: bold;
    text-shadow: 0 0 10px rgba(201, 75, 99, 0.6);
}

.logo-te {
    color: var(--light);
}

.logo-to {
    color: var(--primary);
}


.footer-text {
    font-size: 0.9rem;
    opacity: 0.7;
}

.footer-links {
    display: flex;
    gap: 20px;
    margin-top: 10px;
}

.footer-links a {
    color: var(--light);
    text-decoration: none;
    font-size: 0.9rem;
    padding: 10px 15px;
    border-radius: 6px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.05);
}

.footer-links a:hover {
    background: var(--primary);
    color: var(--dark);
    transform: scale(1.05);
}

.footer-disclaimer {
    font-size: 0.85rem;
    color: var(--gray);
    max-width: 500px;
    text-align: center;
    margin-top: 10px;
    padding: 10px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.05);
}

.footer-social {
    display: flex;
    gap: 15px;
    margin-top: 10px;
}

.social-link {
    color: var(--primary);
    font-size: 1.5rem;
    transition: transform 0.3s, color 0.3s;
}

.social-link:hover {
    transform: scale(1.2);
    color: #ff476c;
}

    </style>
</head>
<body>
  <nav class="navbar">
  <a href="index.html" class="logo">
    <span class="logo-te">Te</span><span class="logo-to">To</span>
  </a>

  <div class="search-container">
    <input type="text" class="search-input" id="search-input" placeholder="Search anime...">
    <button class="search-button">
      <i class="fas fa-search"></i>
    </button>
    <div class="search-results" id="search-results"></div>
  </div>

  <a href="favorites.html" class="favorites-link">
    <i class="fas fa-heart"></i>
    <span class="favorites-text">Favorites</span>
  </a>
</nav>


    <!-- Swiper container -->
    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="swiper-wrapper"></div>
        <div class="swiper-pagination"></div>
    </div>
<div class="popular-section">
  <div class="popular-header">
    <h2 class="popular-title">
      <i class="fas fa-fire"></i> Popular Anime</h2>
    <a href="teto.html">
      <img src="../images/teto.png" alt="teto" class="mascot-image">
    </a>
   
  </div>
  <div class="scroll-controls">
    <div class="popular-container" id="popular-container"></div>
    <div class="arrow-container">
      <button class="scroll-arrow up-arrow" aria-label="Scroll up">â€¹</button>
      <button class="scroll-arrow down-arrow" aria-label="Scroll down">â€º</button>
    </div>
  </div>
</div>
<div class="sharethis-inline-share-buttons"></div>
<div class="subtle-text">
  <p>Share teto to not be stupid</p>
</div>

<div class="recent-section">
  <div class="recent-header">
    <h2 class="recent-title">
      <i class="fas fa-clock"></i> Recent Episodes</h2>
    <img src="../images/teto.gif" alt="teto" class="mascot-image">
  </div>
  <div class="recent-grid" id="recent-container"></div>
<div class="load-more-container">
  <button class="more-button" id="load-more">Load More    <i class="fa-solid fa-chevron-down"></i></button>
</div>
<footer class="footer">
    <div class="footer-container">
        <div class="footer-logo">
            <img src="../images/teto.png" alt="TeTo Logo">
            <p class="footer-brand"><span class="logo-te">Te</span><span class="logo-to">To</span></p>
        </div>

        <p class="footer-text">Â© 2025 TeTo. All rights reserved.</p>

        <div class="footer-links">
            <a href="index.html"><i class="fas fa-home"></i> Home</a>

            <a href="about.html"><i class="fas fa-info-circle"></i> About</a>
        </div>

        <p class="footer-disclaimer">
            TeTo does not host any media files. We provide links to content available on third-party platforms.
        </p>

        <div class="footer-social">
         
            <a href="#" target="_blank" class="social-link"><i class="fab fa-discord"></i></a>
            <a href="#" target="_blank" class="social-link"><i class="fab fa-github"></i></a>
        </div>
    </div>
</footer>


    <div id="loading" class="loading">Loading...</div>
    <div id="error" class="error"></div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
      // Search Functionality
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        let searchTimeout;

        async function searchAnime(query) {
            try {
                const response = await fetch(
                    `https://consumet-leox-api.vercel.app/meta/anilist/advanced-search?query=${encodeURIComponent(query)}`
                );
                const data = await response.json();
                return data.results || [];
            } catch (error) {
                console.error('Search error:', error);
                return [];
            }
        }

        function displayResults(results) {
            searchResults.innerHTML = '';
            if (!results || results.length === 0) {
                searchResults.innerHTML = '<div class="no-results">No results found</div>';
                searchResults.style.display = 'block';
                return;
            }

            results.slice(0, 8).forEach(anime => {
                const item = document.createElement('a');
                item.className = 'search-result-item';
                item.href = `info.html?id=${anime.id}`;
                item.innerHTML = `
                    <img src="${anime.image}" class="search-result-image">
                    <div>
                        <h3 class="search-result-title">${anime.title.english || anime.title.romaji}</h3>
                        <div class="search-result-info">
                            <span>${anime.type || 'TV'} â€¢ <i class="fa-solid fa-calendar"></i> ${anime.releaseDate || 'N/A'} â€¢ <i class="fa-solid fa-closed-captioning"></i> ${anime.totalEpisodes || 'N/A'}</span>
                        </div>
                    </div>`;
                searchResults.appendChild(item);
            });
            searchResults.style.display = 'block';
        }

        searchInput.addEventListener('input', (e) => {
  clearTimeout(searchTimeout);
  const query = e.target.value.trim();

  if (query.length < 2) {
    searchResults.innerHTML = ''; // Clear previous results
    searchResults.style.display = 'none';
    return;
  }

  searchTimeout = setTimeout(async () => {
    const results = await searchAnime(query);
    displayResults(results);
  }, 300);
});

        const API_URL = 'https://consumet-leox-api.vercel.app/meta/anilist/trending';
        let swiper = null;
       
      const POPULAR_API = 'https://consumet-leox-api.vercel.app/meta/anilist/popular';
 
       
        async function fetchAnimeData() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const data = await response.json();
                if (!data.results?.length) throw new Error('No anime data found');
                
                return data.results;
            } catch (error) {
                showError(error.message);
                return null;
            }
        }

        function createSlide(anime) {
            const cleanDescription = anime.description
                .replace(/<br>/g, '\n')
                .replace(/<[^>]+>/g, '')
                .substring(0, 150) + '...';

            return `
                <div class="swiper-slide">
                    <img src="${anime.image}" alt="${anime.title.english}" class="anime-image">
                    <div class="content-overlay">
                        <a href="info.html?id=${anime.id}" class="watch-now-button">
                            <i class="fas fa-play"></i>Watch Now
                        </a>
                        <h2 class="anime-title">${anime.title.english  || anime.title.romaji}</h2>
                        <p class="anime-description">${cleanDescription}</p>
                        <div class="anime-meta">
                            <div class="meta-item">
                                <i class="fas fa-star"></i>
                                ${anime.rating}%
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-play"></i>
                                ${anime.totalEpisodes || 'N/A'} Episodes
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-tv"></i>
                                ${anime.type}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').innerHTML = `
                <h2>Error Loading Content</h2>
                <p>${message}</p>
                <button onclick="window.location.reload()">Try Again</button>
            `;
        }

         function createPopularItem(anime) {
            return `
                <a href="info.html?id=${anime.id}" class="popular-item">
                    <img src="${anime.image}" alt="${anime.title.romaji}" class="popular-image">
                    <h3 class="popular-anime-title">${anime.title.english}</h3>
                </a>
            `;
        }

         function setupPopularScroll() {
  const container = document.getElementById('popular-container');
  const upArrow = document.querySelector('.up-arrow');
  const downArrow = document.querySelector('.down-arrow');

  const scrollAmount = 300; // Adjust scroll distance

  upArrow.addEventListener('click', () => {
    container.scrollBy({
      left: -scrollAmount,
      behavior: 'smooth'
    });
  });

  downArrow.addEventListener('click', () => {
    container.scrollBy({
      left: scrollAmount,
      behavior: 'smooth'
    });
  });

  // Hide arrows when at scroll limits
  container.addEventListener('scroll', () => {
    if (window.innerWidth >= 769) {
      upArrow.style.display = container.scrollLeft > 0 ? 'flex' : 'block';
      downArrow.style.display = container.scrollLeft < (container.scrollWidth - container.clientWidth) ? 'flex' : 'block';
    }
  });
}
         let popularPage = 1;
let isLoading = false;
const popularContainer = document.getElementById('popular-container');

function showSkeletonLoader(count = 5) {
  const skeletons = Array(count).fill('<div class="skeleton-popular"></div>').join('');
  popularContainer.insertAdjacentHTML('beforeend', skeletons);
}

function removeSkeletonLoader() {
  document.querySelectorAll('.skeleton-popular').forEach(el => el.remove());
}

async function loadMorePopular() {
  if (isLoading) return;

  isLoading = true;
  showSkeletonLoader();

  try {
    popularPage++;
    const response = await fetch(`${POPULAR_API}?page=${popularPage}`);
    const data = await response.json();

    removeSkeletonLoader();
    popularContainer.innerHTML += data.results.map(createPopularItem).join('');

    // Stop loading if no more pages (assuming 30 page limit)
    if (popularPage >= 30) {
      popularContainer.removeEventListener('scroll', handlePopularScroll);
    }
  } catch (error) {
    console.error('Error loading more anime:', error);
    removeSkeletonLoader();
  }

  isLoading = false;
}

function handlePopularScroll() {
  const { scrollLeft, scrollWidth, clientWidth } = popularContainer;
  const scrollThreshold = 50; // pixels from right

  if (scrollWidth - (scrollLeft + clientWidth) < scrollThreshold) {
    loadMorePopular();
  }
}
         
         
   // GraphQL API endpoint
const ANILIST_GRAPHQL_API = 'https://graphql.anilist.co';

// Get DOM elements
const recentContainer = document.getElementById('recent-container');
const currentPageSpan = document.getElementById('current-page');
const prevButton = document.getElementById('prev-page');
const nextButton = document.getElementById('next-page');

// Pagination state
let currentPage = 1;

// Calculate time range
const currentTime = Math.floor(Date.now() / 1000);
const oneWeekAgo = currentTime - (35 * 24 * 60 * 60); // 35 days ago

// GraphQL query
const recentQuery = `
query ($oneWeekAgo: Int, $page: Int) {
  Page(perPage: 40, page: $page) {
    pageInfo {
      total
      currentPage
      lastPage
      hasNextPage
    }
    airingSchedules(
      sort: TIME_DESC
      notYetAired: false
      airingAt_greater: $oneWeekAgo
    ) {
      id
      episode
      airingAt
      media {
        id
        title {
          romaji
          english
          native
        }
        episodes
        coverImage {
          large
        }
        format
        duration
        isAdult
      }
    }
  }
}`;

async function fetchRecentEpisodes(page) {
  try {
    const response = await fetch(ANILIST_GRAPHQL_API, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        query: recentQuery,
        variables: {
          oneWeekAgo,
          page
        }
      })
    });

    if (!response.ok) throw new Error('Network response was not ok');

    const data = await response.json();

    if (data.errors) {
      throw new Error(data.errors[0].message);
    }

    // Filter out adult content
    const filteredEpisodes = data.data.Page.airingSchedules.filter(
      schedule => !schedule.media.isAdult
    );

    return {
      episodes: filteredEpisodes,
      pageInfo: data.data.Page.pageInfo
    };
  } catch (error) {
    console.error('Error fetching recent episodes:', error);
    return null;
  }
}

function createRecentItem(episode) {
  return `
    <a href="info.html?id=${episode.media.id}" class="recent-item">
      <div class="image-container">
        <img src="${episode.media.coverImage.large}" alt="${episode.media.title.english || episode.media.title.romaji}" class="recent-image">
        
        
      </div>
      <div class="recent-info">
        <h3 class="recent-anime-title">${episode.media.title.english || episode.media.title.romaji}</h3>
        <div class="recent-meta">
            
         
           <div class="ep-count">
  EP <span>${episode.episode}</span> / <span>${episode.media.episodes || 'âˆž'}</span>
</div>
        </div>
      </div>
    </a>
  `;
}

// Recent Episodes Logic 

const recentLoadMoreButton = document.getElementById('load-more');
let recentCurrentPage = 1;
let recentIsLoading = false;
let recentHasMore = true;

async function loadRecentEpisodes() {
  if (!recentHasMore || recentIsLoading) return;

  recentIsLoading = true;
  function showSkeleton(count = 5) {
    const skeletons = Array(count).fill('<div class="skeleton-recent"></div>').join('');
    recentContainer.insertAdjacentHTML('beforeend', skeletons);
}

function removeSkeleton() {
    document.querySelectorAll('.skeleton-recent').forEach(el => el.remove());
}

  showSkeleton();

  try {
    const data = await fetchRecentEpisodes(recentCurrentPage);

    if (!data?.episodes?.length) {
      recentHasMore = false;
      recentLoadMoreButton.style.display = 'none';
      return;
    }

    removeSkeleton();
    recentContainer.innerHTML += data.episodes.map(createRecentItem).join('');

    // Update pagination state based on API response
    recentHasMore = data.pageInfo.hasNextPage;
    if (!recentHasMore) {
      recentLoadMoreButton.style.display = 'none';
    }

    recentCurrentPage++; // Prepare for next page
  } catch (error) {
    console.error('Error loading episodes:', error);
    recentContainer.innerHTML += '<div class="error">Failed to load episodes</div>';
  } finally {
    recentIsLoading = false;
  }
}

// Initialize 
recentLoadMoreButton.addEventListener('click', loadRecentEpisodes);
loadRecentEpisodes();
// Initialize
recentLoadMoreButton.addEventListener('click', loadRecentEpisodes);
loadRecentEpisodes();
        async function init() {
    try {
      const [trendingData, popularData] = await Promise.all([
                fetchAnimeData(),
                fetch(`${POPULAR_API}?page=1`).then(res => res.json())
            ]);

      document.getElementById('loading').style.display = 'none';

      // Handle main carousel
      const swiperWrapper = document.getElementById('swiper-wrapper');
      swiperWrapper.innerHTML = trendingData.map(createSlide).join('');

      // Handle popular section
      const popularContainer = document.getElementById('popular-container');
      popularContainer.innerHTML = popularData.results.map(createPopularItem).join('');
popularContainer.addEventListener('scroll', handlePopularScroll);
            swiper = new Swiper('.mySwiper', {
                effect: 'coverflow',
                grabCursor: true,
                centeredSlides: true,
                loop: true,
                slidesPerView: 'auto',
                coverflowEffect: {
                    rotate: 5,
                    stretch: 0,
                    depth: 100,
                    modifier: 2.5,
                    slideShadows: true,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                breakpoints: {
                    320: {
                        slidesPerView: 1,
                        coverflowEffect: {
                            rotate: 0,
                            depth: 50
                        }
                    },
                    768: {
                        slidesPerView: 'auto',
                        coverflowEffect: {
                            rotate: 5,
                            depth: 100
                        }
                    },
                    1024: {
                        slidesPerView: 'auto',
                        coverflowEffect: {
                            rotate: 10,
                            depth: 200
                        }
                    }
                }
            });
            setupPopularScroll();
            await loadRecentEpisodes();
    } catch (error) {
     showError(error.message);
   }
   }
        

        init();
    
console.log("%cðŸ° Teto's Secret Domain ðŸŽ®", "font-size: 20px; color: #c94b63;");
console.log("Psst... looking for something? Try the Konami code! â†‘â†‘â†“â†“â†â†’â†â†’BA");
  // Easter Egg 1: Konami Code
    (function() {
    // 1. Konami Code Handler
    const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
                       'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
    let konamiIndex = 0;
    let clickCount = 0;

    // Konami Code Listener
    document.addEventListener('keydown', (e) => {
      if (e.key === konamiCode[konamiIndex]) {
        konamiIndex++;
        if (konamiIndex === konamiCode.length) {
          triggerKonamiEffect();
          konamiIndex = 0;
        }
      } else {
        konamiIndex = 0;
      }
    });

    // 2. Mascot Click Handler
    document.querySelectorAll('.mascot-image').forEach(img => {
      img.addEventListener('click', function() {
        clickCount++;
        if (clickCount === 5) {
          triggerMascotEffect(this);
          clickCount = 0;
        }
      });
    });

    // 3. Text Selection Handler
    document.addEventListener('selectionchange', () => {
      const selection = window.getSelection().toString().toLowerCase();
      if (selection.includes('teto')) {
        const subtleText = document.querySelector('.subtle-text p');
        if (subtleText) {
          const originalText = subtleText.textContent;
          subtleText.textContent = 'ðŸ‡ Teto is watching you!';
          setTimeout(() => {
            subtleText.textContent = originalText;
          }, 2000);
        }
      }
    });

    // Effect Functions
    function triggerKonamiEffect() {
      const overlay = document.createElement('div');
      overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            pointer-events: none;
        `;

      overlay.innerHTML = `
            <div style="
                color: #c94b63;
                font-size: 2.5rem;
                font-weight: bold;
                text-shadow: 0 0 15px rgba(201,75,99,0.8);
                text-align: center;
                animation: float 3s ease-in-out infinite;
            ">
                ðŸŽ® Uãƒ»á´¥ãƒ»U ðŸŽ®
            </div>
            <div style="
                color: #fff;
                font-size: 1.2rem;
                margin-top: 15px;
                animation: scalePulse 2s infinite;
            ">
                Teto's Secret Playground Unlocked!
            </div>
        `;

      document.body.appendChild(overlay);
      setTimeout(() => overlay.remove(), 3000);
    }

    function triggerMascotEffect(element) {
      element.style.transform = 'rotate(360deg)';
      element.style.transition = 'transform 1s cubic-bezier(0.4, 0, 0.2, 1)';

      const danceText = document.createElement('div');
      danceText.style.cssText = `
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(20,20,20,0.95);
            padding: 12px 25px;
            border-radius: 10px;
            border: 2px solid #c94b63;
            color: #c94b63;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 0 15px rgba(201,75,99,0.4);
            animation: dance 1s ease-in-out infinite;
            z-index: 10000;
        `;
      danceText.textContent = 'ðŸ° Teto Dance Time! ðŸŽ¶';

      document.body.appendChild(danceText);
      setTimeout(() => {
        element.style.transform = '';
        danceText.remove();
      }, 2000);
    }

    // Add dynamic styles
    const style = document.createElement('style');
    style.textContent = `
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes scalePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes dance {
            0%, 100% { transform: translateY(0) rotate(-3deg); }
            50% { transform: translateY(-8px) rotate(3deg); }
        }
        
      
    `;
    document.head.appendChild(style);
  })();

    // 4. Mobile Swipe Konami (Up Up Down Down Left Right Left Right)
    let touchStartX = 0;
    let touchStartY = 0;
    let swipeSequence = [];
    const mobileKonami = ['up', 'up', 'down', 'down', 'left', 'right', 'left', 'right'];

    document.addEventListener('touchstart', e => {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    });

    document.addEventListener('touchend', e => {
      const deltaX = e.changedTouches[0].clientX - touchStartX;
      const deltaY = e.changedTouches[0].clientY - touchStartY;
      const absX = Math.abs(deltaX);
      const absY = Math.abs(deltaY);

      let direction = '';
      if (absX > absY) {
        direction = deltaX > 0 ? 'right' : 'left';
      } else {
        direction = deltaY > 0 ? 'down' : 'up';
      }

      swipeSequence.push(direction);
      if (swipeSequence.length > mobileKonami.length) {
        swipeSequence.shift();
      }

      if (swipeSequence.join(',') === mobileKonami.join(',')) {
        triggerKonamiEffect();
        swipeSequence = [];
      }
    

    // 5. Shake Detection
    let lastShake = 0;
    const shakeThreshold = 15;

    function handleShake(e) {
      const acceleration = e.acceleration || e.accelerationIncludingGravity;
      const totalAcceleration = Math.sqrt(
        acceleration.x ** 2 +
        acceleration.y ** 2 +
        acceleration.z ** 2
      );

      if (totalAcceleration > shakeThreshold && Date.now() - lastShake > 1000) {
        lastShake = Date.now();
        triggerShakeEffect();
      }
    }

    if (typeof DeviceMotionEvent !== 'undefined' &&
      typeof DeviceMotionEvent.requestPermission === 'function') {
      DeviceMotionEvent.requestPermission()
        .then(permission => {
          if (permission === 'granted') {
            window.addEventListener('devicemotion', handleShake);
          }
        });
    } else {
      window.addEventListener('devicemotion', handleShake);
    }

    // 6. Triple Tap Easter Egg
    let lastTap = 0;
    let tapCount = 0;

    document.addEventListener('touchend', e => {
      const currentTime = Date.now();
      const tapDelay = currentTime - lastTap;

      if (tapDelay < 300 && tapDelay > 0) {
        tapCount++;
        if (tapCount === 3) {
          triggerTapEffect(e);
          tapCount = 0;
        }
      } else {
        tapCount = 1;
      }

      lastTap = currentTime;
    });

    // New Effect Functions
    function triggerShakeEffect() {
      const shakeText = document.createElement('div');
      shakeText.textContent = 'ðŸ“± Stop Shaking!';
      shakeText.style.cssText = `
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(20,20,20,0.95);
      padding: 15px 30px;
      border-radius: 15px;
      color: #c94b63;
      font-size: 1.2rem;
      box-shadow: 0 0 20px rgba(201,75,99,0.4);
      z-index: 10000;
    `;

      document.body.appendChild(shakeText);
      setTimeout(() => shakeText.remove(), 2000);
    }

    function triggerTapEffect(e) {
      const tapSpot = document.createElement('div');
      tapSpot.style.cssText = `
      position: fixed;
      left: ${e.changedTouches[0].pageX}px;
      top: ${e.changedTouches[0].pageY}px;
      width: 50px;
      height: 50px;
      border: 3px solid #c94b63;
      border-radius: 50%;
      animation: tapPulse 0.6s ease-out;
      pointer-events: none;
    `;

      document.body.appendChild(tapSpot);
      setTimeout(() => tapSpot.remove(), 600);
    }
    function triggerKonamiEffect() {
  const overlay = document.createElement('div');
  overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            pointer-events: none;
        `;

  overlay.innerHTML = `
            <div style="
                color: #c94b63;
                font-size: 2.5rem;
                font-weight: bold;
                text-shadow: 0 0 15px rgba(201,75,99,0.8);
                text-align: center;
                animation: float 3s ease-in-out infinite;
            ">
                ðŸŽ® Uãƒ»á´¥ãƒ»U ðŸŽ®
            </div>
            <div style="
                color: #fff;
                font-size: 1.2rem;
                margin-top: 15px;
                animation: scalePulse 2s infinite;
            ">
                Teto's Secret Playground Unlocked!
            </div>
        `;

  document.body.appendChild(overlay);
  setTimeout(() => overlay.remove(), 3000);
}

    // Add new animations
    const mobileStyles = document.createElement('style');
    mobileStyles.textContent += `
    @keyframes tapPulse {
      0% { transform: scale(0); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }
  `;
    document.head.appendChild(mobileStyles);

    })();
</script>

</body>
</html>

